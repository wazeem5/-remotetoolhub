function copyCode() {
const el = document.getElementById('exampleCode');
if (!el) return;
const text = el.textContent || el.innerText || '';

(async () => {
try {
if (navigator.clipboard && navigator.clipboard.writeText) {
await navigator.clipboard.writeText(text);
showToast('تم النسخ!');
return;
}
throw new Error('no-clipboard');
} catch {
// fallback
const ta = document.createElement('textarea');
ta.value = text;
ta.setAttribute('readonly', '');
ta.style.position = 'absolute';
ta.style.left = '-9999px';
document.body.appendChild(ta);
ta.select();
ta.setSelectionRange(0, ta.value.length);
try {
document.execCommand('copy');
showToast('تم النسخ!');
} catch {
showToast('النسخ فشل — انسخ يدوياً', true);
}
document.body.removeChild(ta);
}
})();
}

function showToast(msg, isError) {
let t = document.getElementById('copyToast');
if (!t) {
t = document.createElement('div');
t.id = 'copyToast';
Object.assign(t.style, {
position: 'fixed',
bottom: '20px',
left: '50%',
transform: 'translateX(-50%) translateY(6px)',
background: 'rgba(11,18,32,0.95)',
color: '#fff',
padding: '8px 12px',
borderRadius: '6px',
fontSize: '13px',
zIndex: 9999,
opacity: 0,
transition: 'opacity .18s, transform .18s',
pointerEvents: 'none'
});
document.body.appendChild(t);
}
t.textContent = msg;
t.style.background = isError ? 'crimson' : 'rgba(11,18,32,0.95)';
t.style.opacity = '1';
t.style.transform = 'translateX(-50%) translateY(0)';
clearTimeout(t._timeout);
t._timeout = setTimeout(() => {
t.style.opacity = '0';
t.style.transform = 'translateX(-50%) translateY(6px)';
}, 1400);
}
