<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Guide to Node.js and Backend Development 2025 - Part 2 | RemoteToolHub</title>
    <meta name="description" content="Master Express.js and advanced API development in 2025. Part 2 covers routing, middleware, authentication, and RESTful API design.">
    <meta name="keywords" content="Express.js, REST API, Node.js, Backend Development, Middleware, Authentication, 2025">
    <meta name="author" content="RemoteToolHub">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Complete Guide to Node.js and Backend Development 2025 - Part 2">
    <meta property="og:description" content="Master Express.js and advanced API development. Learn routing, middleware, and authentication.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://remotetoolhub.github.io/blog/articles/nodejs-backend-development-2025-part2.html">
    <meta property="og:image" content="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=1200&h=630&fit=crop">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Complete Guide to Node.js and Backend Development 2025 - Part 2">
    <meta name="twitter:description" content="Master Express.js and advanced API development.">
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=1200&h=630&fit=crop">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://remotetoolhub.github.io/blog/articles/nodejs-backend-development-2025-part2.html">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Complete Guide to Node.js and Backend Development 2025 - Part 2",
        "description": "Master Express.js and advanced API development in 2025. Learn routing, middleware, authentication, and RESTful API design.",
        "author": {
            "@type": "Organization",
            "name": "RemoteToolHub"
        },
        "publisher": {
            "@type": "Organization",
            "name": "RemoteToolHub",
            "logo": {
                "@type": "ImageObject",
                "url": "https://remotetoolhub.github.io/logo.png"
            }
        },
        "datePublished": "2025-01-01",
        "dateModified": "2025-01-01",
        "image": "https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=1200&h=630&fit=crop",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://remotetoolhub.github.io/blog/articles/nodejs-backend-development-2025-part2.html"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            z-index: 1000;
            transition: width 0.3s ease;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            margin: -20px -20px 40px -20px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .part-indicator {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .meta-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .hero-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .content {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .content h2 {
            color: #2c3e50;
            margin: 40px 0 20px 0;
            font-size: 2rem;
            border-left: 5px solid #667eea;
            padding-left: 20px;
            position: relative;
        }
        
        .content h3 {
            color: #34495e;
            margin: 30px 0 15px 0;
            font-size: 1.5rem;
        }
        
        .content p {
            margin-bottom: 20px;
            text-align: justify;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 5px solid #667eea;
            padding: 25px;
            margin: 30px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 10px;
            right: 15px;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .comparison-table tr:hover {
            background: #e3f2fd;
            transition: background 0.3s ease;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .feature-card h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .navigation-links {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 50px 0;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border: 2px solid #667eea;
        }
        
        .nav-link {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .nav-link.disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .back-to-blog {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #eee;
        }
        
        .back-to-blog a {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .back-to-blog a:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
                border-radius: 10px;
            }
            
            .header {
                margin: -15px -15px 30px -15px;
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .meta-info {
                gap: 15px;
            }
            
            .hero-image {
                height: 250px;
            }
            
            .content h2 {
                font-size: 1.6rem;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-links {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>
    
    <div class="container">
        <header class="header">
            <div class="part-indicator">Part 2 of 3</div>
            <h1>Complete Guide to Node.js and Backend Development 2025</h1>
            <p class="subtitle">Express.js and Advanced API Development</p>
            <div class="meta-info">
                <div class="meta-item">
                    <span>📅</span>
                    <span>January 2025</span>
                </div>
                <div class="meta-item">
                    <span>⏱️</span>
                    <span>12 min read</span>
                </div>
                <div class="meta-item">
                    <span>🏷️</span>
                    <span>Express.js & APIs</span>
                </div>
                <div class="meta-item">
                    <span>👨‍💻</span>
                    <span>Intermediate</span>
                </div>
            </div>
        </header>
        
        <img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=1200&h=400&fit=crop&crop=center" alt="Express.js API Development" class="hero-image">
        
        <article class="content">
            <div class="highlight-box">
                <h3>🎯 What You'll Learn in Part 2</h3>
                <p>This part covers Express.js framework, advanced routing, middleware development, authentication systems, RESTful API design, and error handling best practices.</p>
            </div>
            
            <h2>1. Introduction to Express.js</h2>
            
            <p>Express.js is the most popular Node.js web framework, providing a robust set of features for web and mobile applications. It's minimal, flexible, and provides a thin layer of fundamental web application features.</p>
            
            <h3>Installing and Setting Up Express</h3>
            
            <div class="code-block" data-lang="Bash">
                <pre>
# Initialize new project
npm init -y

# Install Express and essential packages
npm install express
npm install --save-dev nodemon

# Install additional useful packages
npm install cors helmet morgan compression
npm install dotenv express-rate-limit
npm install express-validator

# For authentication
npm install jsonwebtoken bcryptjs

# For database (choose one)
npm install mongoose  # MongoDB
npm install pg        # PostgreSQL
npm install mysql2    # MySQL
                </pre>
            </div>
            
            <h3>Basic Express Application</h3>
            
            <div class="code-block" data-lang="JavaScript">
                <pre>
// app.js - Basic Express setup
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const morgan = require('morgan');
const compression = require('compression');
require('dotenv').config();

const app = express();
const PORT = process.env.PORT || 3000;

// Security middleware
app.use(helmet());
app.use(cors());

// Logging middleware
app.use(morgan('combined'));

// Compression middleware
app.use(compression());

// Body parsing middleware
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true, limit: '10mb' }));

// Static files
app.use(express.static('public'));

// Basic route
app.get('/', (req, res) => {
    res.json({
        message: 'Welcome to Express.js API',
        version: '1.0.0',
        timestamp: new Date().toISOString()
    });
});

// Health check endpoint
app.get('/health', (req, res) => {
    res.status(200).json({
        status: 'OK',
        uptime: process.uptime(),
        timestamp: new Date().toISOString()
    });
});

// 404 handler
app.use('*', (req, res) => {
    res.status(404).json({
        error: 'Route not found',
        path: req.originalUrl,
        method: req.method
    });
});

// Global error handler
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({
        error: 'Something went wrong!',
        message: process.env.NODE_ENV === 'development' ? err.message : 'Internal server error'
    });
});

// Start server
app.listen(PORT, () => {
    console.log(`Server running on http://localhost:${PORT}`);
    console.log(`Environment: ${process.env.NODE_ENV || 'development'}`);
});

module.exports = app;
                </pre>
            </div>
            
            <h2>2. Advanced Routing</h2>
            
            <h3>Router Module</h3>
            
            <div class="code-block" data-lang="JavaScript">
                <pre>
// routes/users.js - User routes
const express = require('express');
const router = express.Router();
const { body, validationResult } = require('express-validator');

// Mock database
let users = [
    { id: 1, name: 'John Doe', email: 'john@example.com', role: 'admin' },
    { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'user' }
];

// Validation middleware
const validateUser = [
    body('name').isLength({ min: 2 }).withMessage('Name must be at least 2 characters'),
    body('email').isEmail().withMessage('Must be a valid email'),
    body('role').isIn(['admin', 'user']).withMessage('Role must be admin or user')
];

// GET /api/users - Get all users
router.get('/', (req, res) => {
    const { page = 1, limit = 10, role, search } = req.query;
    
    let filteredUsers = users;
    
    // Filter by role
    if (role) {
        filteredUsers = filteredUsers.filter(user => user.role === role);
    }
    
    // Search by name or email
    if (search) {
        filteredUsers = filteredUsers.filter(user => 
            user.name.toLowerCase().includes(search.toLowerCase()) ||
            user.email.toLowerCase().includes(search.toLowerCase())
        );
    }
    
    // Pagination
    const startIndex = (page - 1) * limit;
    const endIndex = page * limit;
    const paginatedUsers = filteredUsers.slice(startIndex, endIndex);
    
    res.json({
        users: paginatedUsers,
        pagination: {
            currentPage: parseInt(page),
            totalPages: Math.ceil(filteredUsers.length / limit),
            totalUsers: filteredUsers.length,
            hasNext: endIndex < filteredUsers.length,
            hasPrev: startIndex > 0
        }
    });
});

// GET /api/users/:id - Get user by ID
router.get('/:id', (req, res) => {
    const id = parseInt(req.params.id);
    const user = users.find(u => u.id === id);
    
    if (!user) {
        return res.status(404).json({ error: 'User not found' });
    }
    
    res.json(user);
});

// POST /api/users - Create new user
router.post('/', validateUser, (req, res) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
        return res.status(400).json({ errors: errors.array() });
    }
    
    const { name, email, role } = req.body;
    
    // Check if email already exists
    const existingUser = users.find(u => u.email === email);
    if (existingUser) {
        return res.status(409).json({ error: 'Email already exists' });
    }
    
    const newUser = {
        id: users.length + 1,
        name,
        email,
        role,
        createdAt: new Date().toISOString()
    };
    
    users.push(newUser);
    res.status(201).json(newUser);
});

// PUT /api/users/:id - Update user
router.put('/:id', validateUser, (req, res) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
        return res.status(400).json({ errors: errors.array() });
    }
    
    const id = parseInt(req.params.id);
    const userIndex = users.findIndex(u => u.id === id);
    
    if (userIndex === -1) {
        return res.status(404).json({ error: 'User not found' });
    }
    
    const { name, email, role } = req.body;
    
    // Check if email already exists (excluding current user)
    const existingUser = users.find(u => u.email === email && u.id !== id);
    if (existingUser) {
        return res.status(409).json({ error: 'Email already exists' });
    }
    
    users[userIndex] = {
        ...users[userIndex],
        name,
        email,
        role,
        updatedAt: new Date().toISOString()
    };
    
    res.json(users[userIndex]);
});

// DELETE /api/users/:id - Delete user
router.delete('/:id', (req, res) => {
    const id = parseInt(req.params.id);
    const userIndex = users.findIndex(u => u.id === id);
    
    if (userIndex === -1) {
        return res.status(404).json({ error: 'User not found' });
    }
    
    const deletedUser = users.splice(userIndex, 1)[0];
    res.json({ message: 'User deleted successfully', user: deletedUser });
});

module.exports = router;
                </pre>
            </div>
            
            <h3>Route Parameters and Query Strings</h3>
            
            <div class="code-block" data-lang="JavaScript">
                <pre>
// routes/advanced.js - Advanced routing examples
const express = require('express');
const router = express.Router();

// Route parameters
router.get('/users/:userId/posts/:postId', (req, res) => {
    const { userId, postId } = req.params;
    res.json({
        message: 'Route parameters',
        userId: parseInt(userId),
        postId: parseInt(postId)
    });
});

// Optional parameters
router.get('/products/:id?', (req, res) => {
    const { id } = req.params;
    if (id) {
        res.json({ message: `Product ${id}` });
    } else {
        res.json({ message: 'All products' });
    }
});

// Wildcard routes
router.get('/files/*', (req, res) => {
    const filePath = req.params[0];
    res.json({ message: `File path: ${filePath}` });
});

// Regular expressions in routes
router.get(/.*fly$/, (req, res) => {
    res.json({ message: 'Route ending with "fly"' });
});

// Query parameters
router.get('/search', (req, res) => {
    const {
        q,           // search query
        page = 1,    // default page
        limit = 10,  // default limit
        sort = 'name',
        order = 'asc'
    } = req.query;
    
    res.json({
        query: q,
        pagination: { page: parseInt(page), limit: parseInt(limit) },
        sorting: { sort, order }
    });
});

// Route handlers with multiple functions
const authenticate = (req, res, next) => {
    // Mock authentication
    const token = req.headers.authorization;
    if (!token) {
        return res.status(401).json({ error: 'No token provided' });
    }
    req.user = { id: 1, name: 'John Doe' };
    next();
};

const authorize = (roles) => {
    return (req, res, next) => {
        if (!roles.includes(req.user.role)) {
            return res.status(403).json({ error: 'Insufficient permissions' });
        }
        next();
    };
};

router.get('/protected', authenticate, (req, res) => {
    res.json({ message: 'Protected route', user: req.user });
});

router.get('/admin', authenticate, authorize(['admin']), (req, res) => {
    res.json({ message: 'Admin only route' });
});

module.exports = router;
                </pre>
            </div>
            
            <h2>3. Middleware Development</h2>
            
            <h3>Custom Middleware</h3>
            
            <div class="code-block" data-lang="JavaScript">
                <pre>
// middleware/index.js - Custom middleware collection
const rateLimit = require('express-rate-limit');

// Request logging middleware
const requestLogger = (req, res, next) => {
    const start = Date.now();
    
    res.on('finish', () => {
        const duration = Date.now() - start;
        console.log(`${req.method} ${req.originalUrl} - ${res.statusCode} - ${duration}ms`);
    });
    
    next();
};

// Request ID middleware
const requestId = (req, res, next) => {
    req.id = Math.random().toString(36).substr(2, 9);
    res.setHeader('X-Request-ID', req.id);
    next();
};

// API key validation middleware
const validateApiKey = (req, res, next) => {
    const apiKey = req.headers['x-api-key'];
    const validApiKeys = process.env.API_KEYS ? process.env.API_KEYS.split(',') : [];
    
    if (!apiKey) {
        return res.status(401).json({ error: 'API key required' });
    }
    
    if (!validApiKeys.includes(apiKey)) {
        return res.status(401).json({ error: 'Invalid API key' });
    }
    
    next();
};

// Rate limiting middleware
const createRateLimit = (windowMs, max, message) => {
    return rateLimit({
        windowMs,
        max,
        message: { error: message },
        standardHeaders: true,
        legacyHeaders: false,
        handler: (req, res) => {
            res.status(429).json({
                error: message,
                retryAfter: Math.round(windowMs / 1000)
            });
        }
    });
};

// Content type validation middleware
const validateContentType = (expectedType) => {
    return (req, res, next) => {
        if (req.method === 'POST' || req.method === 'PUT') {
            const contentType = req.headers['content-type'];
            if (!contentType || !contentType.includes(expectedType)) {
                return res.status(400).json({
                    error: `Content-Type must be ${expectedType}`
                });
            }
        }
        next();
    };
};

// Error handling middleware
const asyncHandler = (fn) => {
    return (req, res, next) => {
        Promise.resolve(fn(req, res, next)).catch(next);
    };
};

// Cache control middleware
const cacheControl = (maxAge = 3600) => {
    return (req, res, next) => {
        res.setHeader('Cache-Control', `public, max-age=${maxAge}`);
        next();
    };
};

module.exports = {
    requestLogger,
    requestId,
    validateApiKey,
    createRateLimit,
    validateContentType,
    asyncHandler,
    cacheControl
};
                </pre>
            </div>
            
            <h3>Authentication Middleware</h3>
            
            <div class="code-block" data-lang="JavaScript">
                <pre>
// middleware/auth.js - Authentication middleware
const jwt = require('jsonwebtoken');
const bcrypt = require('bcryptjs');

const JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';
const JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || '24h';

// Generate JWT token
const generateToken = (payload) => {
    return jwt.sign(payload, JWT_SECRET, { expiresIn: JWT_EXPIRES_IN });
};

// Verify JWT token
const verifyToken = (token) => {
    try {
        return jwt.verify(token, JWT_SECRET);
    } catch (error) {
        throw new Error('Invalid token');
    }
};

// Hash password
const hashPassword = async (password) => {
    const saltRounds = 12;
    return await bcrypt.hash(password, saltRounds);
};

// Compare password
const comparePassword = async (password, hashedPassword) => {
    return await bcrypt.compare(password, hashedPassword);
};

// Authentication middleware
const authenticate = async (req, res, next) => {
    try {
        const authHeader = req.headers.authorization;
        
        if (!authHeader) {
            return res.status(401).json({ error: 'No token provided' });
        }
        
        const token = authHeader.split(' ')[1]; // Bearer TOKEN
        
        if (!token) {
            return res.status(401).json({ error: 'No token provided' });
        }
        
        const decoded = verifyToken(token);
        req.user = decoded;
        next();
    } catch (error) {
        return res.status(401).json({ error: 'Invalid token' });
    }
};

// Authorization middleware
const authorize = (...roles) => {
    return (req, res, next) => {
        if (!req.user) {
            return res.status(401).json({ error: 'Authentication required' });
        }
        
        if (roles.length && !roles.includes(req.user.role)) {
            return res.status(403).json({ error: 'Insufficient permissions' });
        }
        
        next();
    };
};

// Optional authentication (doesn't fail if no token)
const optionalAuth = async (req, res, next) => {
    try {
        const authHeader = req.headers.authorization;
        
        if (authHeader) {
            const token = authHeader.split(' ')[1];
            if (token) {
                const decoded = verifyToken(token);
                req.user = decoded;
            }
        }
    } catch (error) {
        // Ignore authentication errors for optional auth
    }
    
    next();
};

module.exports = {
    generateToken,
    verifyToken,
    hashPassword,
    comparePassword,
    authenticate,
    authorize,
    optionalAuth
};
                </pre>
            </div>
            
            <h2>4. RESTful API Design</h2>
            
            <h3>REST API Best Practices</h3>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>HTTP Method</th>
                        <th>Purpose</th>
                        <th>Example URL</th>
                        <th>Request Body</th>
                        <th>Response</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>GET</strong></td>
                        <td>Retrieve data</td>
                        <td>/api/users</td>
                        <td>None</td>
                        <td>200 + data</td>
                    </tr>
                    <tr>
                        <td><strong>POST</strong></td>
                        <td>Create new resource</td>
                        <td>/api/users</td>
                        <td>JSON data</td>
                        <td>201 + created resource</td>
                    </tr>
                    <tr>
                        <td><strong>PUT</strong></td>
                        <td>Update entire resource</td>
                        <td>/api/users/123</td>
                        <td>Complete JSON data</td>
                        <td>200 + updated resource</td>
                    </tr>
                    <tr>
                        <td><strong>PATCH</strong></td>
                        <td>Partial update</td>
                        <td>/api/users/123</td>
                        <td>Partial JSON data</td>
                        <td>200 + updated resource</td>
                    </tr>
                    <tr>
                        <td><strong>DELETE</strong></td>
                        <td>Remove resource</td>
                        <td>/api/users/123</td>
                        <td>None</td>
                        <td>204 or 200 + message</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Complete REST API Example</h3>
            
            <div class="code-block" data-lang="JavaScript">
                <pre>
// routes/api.js - Complete REST API
const express = require('express');
const router = express.Router();
const { body, param, query, validationResult } = require('express-validator');
const { authenticate, authorize } = require('../middleware/auth');
const { asyncHandler } = require('../middleware');

// Mock database
let posts = [
    {
        id: 1,
        title: 'First Post',
        content: 'This is the first post',
        author: 'John Doe',
        authorId: 1,
        tags: ['javascript', 'nodejs'],
        published: true,
        createdAt: new Date('2025-01-01'),
        updatedAt: new Date('2025-01-01')
    }
];

// Validation rules
const postValidation = [
    body('title').isLength({ min: 3, max: 100 }).withMessage('Title must be 3-100 characters'),
    body('content').isLength({ min: 10 }).withMessage('Content must be at least 10 characters'),
    body('tags').optional().isArray().withMessage('Tags must be an array'),
    body('published').optional().isBoolean().withMessage('Published must be boolean')
];

const idValidation = [
    param('id').isInt({ min: 1 }).withMessage('ID must be a positive integer')
];

const queryValidation = [
    query('page').optional().isInt({ min: 1 }).withMessage('Page must be positive integer'),
    query('limit').optional().isInt({ min: 1, max: 100 }).withMessage('Limit must be 1-100'),
    query('published').optional().isBoolean().withMessage('Published must be boolean')
];

// Helper function to handle validation errors
const handleValidationErrors = (req, res, next) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
        return res.status(400).json({
            error: 'Validation failed',
            details: errors.array()
        });
    }
    next();
};

// GET /api/posts - Get all posts with filtering and pagination
router.get('/posts', 
    queryValidation,
    handleValidationErrors,
    asyncHandler(async (req, res) => {
        const {
            page = 1,
            limit = 10,
            published,
            author,
            tag,
            search,
            sortBy = 'createdAt',
            sortOrder = 'desc'
        } = req.query;
        
        let filteredPosts = [...posts];
        
        // Filter by published status
        if (published !== undefined) {
            filteredPosts = filteredPosts.filter(post => 
                post.published === (published === 'true')
            );
        }
        
        // Filter by author
        if (author) {
            filteredPosts = filteredPosts.filter(post => 
                post.author.toLowerCase().includes(author.toLowerCase())
            );
        }
        
        // Filter by tag
        if (tag) {
            filteredPosts = filteredPosts.filter(post => 
                post.tags.includes(tag)
            );
        }
        
        // Search in title and content
        if (search) {
            const searchLower = search.toLowerCase();
            filteredPosts = filteredPosts.filter(post => 
                post.title.toLowerCase().includes(searchLower) ||
                post.content.toLowerCase().includes(searchLower)
            );
        }
        
        // Sorting
        filteredPosts.sort((a, b) => {
            const aVal = a[sortBy];
            const bVal = b[sortBy];
            
            if (sortOrder === 'asc') {
                return aVal > bVal ? 1 : -1;
            } else {
                return aVal < bVal ? 1 : -1;
            }
        });
        
        // Pagination
        const startIndex = (page - 1) * limit;
        const endIndex = page * limit;
        const paginatedPosts = filteredPosts.slice(startIndex, endIndex);
        
        // Response with metadata
        res.json({
            data: paginatedPosts,
            meta: {
                pagination: {
                    page: parseInt(page),
                    limit: parseInt(limit),
                    total: filteredPosts.length,
                    pages: Math.ceil(filteredPosts.length / limit)
                },
                filters: {
                    published,
                    author,
                    tag,
                    search
                },
                sorting: {
                    sortBy,
                    sortOrder
                }
            }
        });
    })
);

// GET /api/posts/:id - Get single post
router.get('/posts/:id',
    idValidation,
    handleValidationErrors,
    asyncHandler(async (req, res) => {
        const id = parseInt(req.params.id);
        const post = posts.find(p => p.id === id);
        
        if (!post) {
            return res.status(404).json({
                error: 'Post not found',
                message: `Post with ID ${id} does not exist`
            });
        }
        
        res.json({ data: post });
    })
);

// POST /api/posts - Create new post
router.post('/posts',
    authenticate,
    postValidation,
    handleValidationErrors,
    asyncHandler(async (req, res) => {
        const { title, content, tags = [], published = false } = req.body;
        
        const newPost = {
            id: posts.length + 1,
            title,
            content,
            author: req.user.name,
            authorId: req.user.id,
            tags,
            published,
            createdAt: new Date(),
            updatedAt: new Date()
        };
        
        posts.push(newPost);
        
        res.status(201).json({
            message: 'Post created successfully',
            data: newPost
        });
    })
);

// PUT /api/posts/:id - Update entire post
router.put('/posts/:id',
    authenticate,
    idValidation,
    postValidation,
    handleValidationErrors,
    asyncHandler(async (req, res) => {
        const id = parseInt(req.params.id);
        const postIndex = posts.findIndex(p => p.id === id);
        
        if (postIndex === -1) {
            return res.status(404).json({ error: 'Post not found' });
        }
        
        // Check if user owns the post or is admin
        if (posts[postIndex].authorId !== req.user.id && req.user.role !== 'admin') {
            return res.status(403).json({ error: 'Not authorized to update this post' });
        }
        
        const { title, content, tags = [], published = false } = req.body;
        
        posts[postIndex] = {
            ...posts[postIndex],
            title,
            content,
            tags,
            published,
            updatedAt: new Date()
        };
        
        res.json({
            message: 'Post updated successfully',
            data: posts[postIndex]
        });
    })
);

// PATCH /api/posts/:id - Partial update
router.patch('/posts/:id',
    authenticate,
    idValidation,
    handleValidationErrors,
    asyncHandler(async (req, res) => {
        const id = parseInt(req.params.id);
        const postIndex = posts.findIndex(p => p.id === id);
        
        if (postIndex === -1) {
            return res.status(404).json({ error: 'Post not found' });
        }
        
        // Check authorization
        if (posts[postIndex].authorId !== req.user.id && req.user.role !== 'admin') {
            return res.status(403).json({ error: 'Not authorized to update this post' });
        }
        
        // Only update provided fields
        const allowedFields = ['title', 'content', 'tags', 'published'];
        const updates = {};
        
        allowedFields.forEach(field => {
            if (req.body[field] !== undefined) {
                updates[field] = req.body[field];
            }
        });
        
        posts[postIndex] = {
            ...posts[postIndex],
            ...updates,
            updatedAt: new Date()
        };
        
        res.json({
            message: 'Post updated successfully',
            data: posts[postIndex]
        });
    })
);

// DELETE /api/posts/:id - Delete post
router.delete('/posts/:id',
    authenticate,
    idValidation,
    handleValidationErrors,
    asyncHandler(async (req, res) => {
        const id = parseInt(req.params.id);
        const postIndex = posts.findIndex(p => p.id === id);
        
        if (postIndex === -1) {
            return res.status(404).json({ error: 'Post not found' });
        }
        
        // Check authorization
        if (posts[postIndex].authorId !== req.user.id && req.user.role !== 'admin') {
            return res.status(403).json({ error: 'Not authorized to delete this post' });
        }
        
        const deletedPost = posts.splice(postIndex, 1)[0];
        
        res.json({
            message: 'Post deleted successfully',
            data: deletedPost
        });
    })
);

module.exports = router;
                </pre>
            </div>
            
            <div class="highlight-box">
                <h3>🎯 Key Takeaways from Part 2</h3>
                <ul>
                    <li><strong>Express.js Setup:</strong> Proper configuration with essential middleware and security</li>
                    <li><strong>Advanced Routing:</strong> Parameters, query strings, and route organization</li>
                    <li><strong>Custom Middleware:</strong> Authentication, validation, and request processing</li>
                    <li><strong>RESTful APIs:</strong> Complete CRUD operations with proper HTTP methods and status codes</li>
                    <li><strong>Error Handling:</strong> Comprehensive error management and validation</li>
                </ul>
            </div>
        </article>
        
        <div class="navigation-links">
            <a href="nodejs-backend-development-2025-part1.html" class="nav-link">← Previous Part</a>
            <span>Part 2 of 3</span>
            <a href="nodejs-backend-development-2025-part3a.html" class="nav-link">Next Part →</a>
        </div>
        
        <div class="back-to-blog">
            <a href="../index.html">← Back to Blog</a>
        </div>
    </div>
    
    <script>
        // Reading progress bar
        window.addEventListener('scroll', () => {
            const article = document.querySelector('.content');
            const scrollTop = window.pageYOffset;
            const docHeight = article.offsetHeight;
            const winHeight = window.innerHeight;
            const scrollPercent = scrollTop / (docHeight - winHeight);
            const scrollPercentRounded = Math.round(scrollPercent * 100);
            
            document.getElementById('progressBar').style.width = Math.min(scrollPercentRounded, 100) + '%';
        });
        
        // Add copy functionality to code blocks
        document.querySelectorAll('.code-block').forEach(block => {
            const button = document.createElement('button');
            button.textContent = 'Copy';
            button.style.cssText = `
                position: absolute;
                top: 10px;
                left: 15px;
                background: #667eea;
                color: white;
                border: none;
                padding: 4px 12px;
                border-radius: 4px;
                font-size: 0.8rem;
                cursor: pointer;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            block.style.position = 'relative';
            block.appendChild(button);
            
            block.addEventListener('mouseenter', () => {
                button.style.opacity = '1';
            });
            
            block.addEventListener('mouseleave', () => {
                button.style.opacity = '0';
            });
            
            button.addEventListener('click', () => {
                const code = block.querySelector('pre').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    button.textContent = 'Copied!';
                    setTimeout(() => {
                        button.textContent = 'Copy';
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>